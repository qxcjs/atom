[TOC]
## 一、vi编辑器介绍
&emsp;&emsp;vim是vi的进阶版。可以分颜色显示代码和特殊内容的文本，程序开发工具。

&emsp;&emsp; vi 编辑器有3 种模式：命令模式、输入模式、末行模式

**command mode**
命令模式:vi启动后默认进入的是命令模式,在这个模式下，你不能编辑你当前的文件，但是，你可以发布插入、追加、删除和许多强大的移动光标位置的命令。
从这个模式使用命令可以切换到另外两种模式，同时无论在任何模式下只要按一下 `Esc`键都可以返回命令模式。

**insert mode**
插入模式： 在这个模式中我们可以编辑、修改、输入等编辑工作，在编辑器最后一行显示一个“--INSERT--”或“--REPLACE--"标志着 vi进入了输入模式。当我们完成修改输入等操作的时候我们需要保存文件，这时我们需要先返回命令模式，在进入末行模式保存。

**last line mode**
末行模式 ： 在命令模式输入“：/ ?”任意一个字符即可进入该模式，在末行模式中有好多好用的命令。

## 二、vim 操作命令

### 1. 保存和退出命令
直接输入命令 vi或vim不指定文件名，由于这是一个没有命名的空文件，显示了 vi的版本信息。

直接使用 vi打开文件，如果文件存在则打开存在文件；如果不存在的话，将以我们指定的参数作为文件
名。
```
#  vi test.txt 启动vi并创建test.txt文件
q         退出
q!        强制退出，不保存
wq        保存并退出
wq!       保存强制退出
```

### 2. 插入命令

|命令|作用|
|-----|-----|
|a|在光标所在字符后插入|
|A|在光标所在行尾插入|
|i|在光标所在字符前插入|
|I|在光标所在行首插入|
|o|在光标下插入新行|
|O|在光标上插入新行|

### 3. 定位命令
|命令|作用|
|-----|-----|
|:set nu|设置行号|
|:set nonu | 取消行号|
|gg |光标移动到第一行的行首|
|G |光标移动到最后一样的行首|
|nG | 移动到第n行|
|:n | 移动到第n行|
|$|移至行尾|
|0|移至行首|
|^|移动到当前行的第一个非空字符|


 n<space>      n为数字  按20在按space建会向后移动20字符
 hjkl      分别对应 左下上右，如果要进行多次移动，使用”nj"，n为需要移动的次数，如“30l”表示向右移动30个字符。

### 4. 删除命令
|命令|作用|
|---|----|
|x|删除光标所在处字符|
|nx|删除光标所在处后n个字符|
|dd|删除光标所在行，ndd删除n行|
|dG|删除光标所在行到文件末尾|
|D|删除光标所在处到行位内容|
|:n1,n2d|删除指定范围的行|


### 5. 复制和剪切

|命令|作用|
|----|----|
|yy|复制当前行|
|nyy|复制当前行以下n行|
|dd|剪切当前行|
|ndd|剪切当前行以下n行|
|p、P|粘贴在当前光标所在行下面或上面|

### 6. 替换和取消命令
|命令|作用|
|----|---|
|r|取代光标所在处字符|
|R|从光标所在处开始替换字符，按Ecs结束|
|u|撤销|
|Ctrl+r|恢复|

### 6. 组合命令
|复合命令|等效长命令|
|----|---|
|C|c$|
|s|cl|
|S|^c|
|I|^i|
|A|$a|
|o|A(CR)|
|O|ko|

### 7. 小技巧
`；`命令会重复查找上次`f`命令所查找的字符。如果不小心按了多次`;`可以方便使用`,`命令回退回去。
`.`命令会“重复上次修改”，“上次修改”可以指很多东西，一次修改的单位可以是字符、整行，甚至是整个文件，从进入插入模式的那一刻起（例如，输入i），直到返回普通模式为止（输入<Esc>），vim会记录每一个按键操作。做出这样一个修改后再用`.`命令的话，它讲会重新执行所有这些按键操作。

### 执行、重复、撤销
`u`撤销上次的修改

### 查找和替换
`*`可以查找当前光标下的单词，按`n`会向下继续查找。

### 用次数做简单的算术运算
`<C-a>`和`<C-x>`命令分别对数字执行加和减操作。在不带次数执行时，它们会逐个加减，但如果带一个次数前缀，那么就可以用它们加减任意整数。
但是如果光标不在数字上会发生什么?文档里说, `<C-a>` 命令会“把当前光标
之上或之后的数值加上 。因此,如果光标不在数字上,
那么 `<C-a>` 命令将在当前行正向查找一个数字,如果找到了,它就径直跳到那里。我们可以利用这一点简化查找数字的操作。

### 操作符
*操作符 + 动作命令 = 操作*
d{motion} 命令可以对一个字符( dl )、一个完整单词( daw )或一整个段落( dap ) 进行操作,它作用的范围由动作命令决定。 c{motion} 、 y{motion} 以及其他一些命令也类似,它们被统称为操作符(operator)。你可以用 `:h operator` 来查阅完整的列表。

### 未理解命令
`f{char}`，`t{char}`,`F{char}`,`T{char}`
qx{changes}q

## 插入模式命令
在插入模式下,退格键的作用如你所愿,它删除光标前的字符。另外,我们还可
以用下面这些组合键:
|按键操作|用途|
|-----|----|
|<C-h>|删除前一个字符(同退格键)|
|<C-w>|删除前一个单词|
|<C-u|删至行首|
这些命令不是插入模式所独有的,甚至也不是 Vim 所独有的,在 Vim 的命令行模
式中,以及在 bash shell 中,也可以使用它们。

### 返回不同模式
|按键操作|用途|
|-----|----|
|<ESC>|切换到普通模式|
|<C-[>|切换到普通模式|
|<C-o>|切换到插入-普通模式|
插入-普通模式是普通模式的一个特例,它能让我们执行一次普遍模式命令。在此
模式中,我们可以执行一个普通模式命令,执行完后,马上就又返回到插入模式。
在当前行正好处于窗口顶部或底部时,有时我会滚动一下屏幕,以便看到更多的
上下文。用 zz 命令可以重绘屏幕,并把当前行显示在窗口正中,这样就能够阅读当
前行之上及之下的半屏内容。我常常会键入 <C-0>zz ,在插入-普通模式中触发这条命令。此操作完成后就会直接回到插入模式,因此我可以不受中断地继续打字。

## 可视模式
### 激活可视模式
|按键操作|用途|
|-----|----|
|v|激活面向字符的可视模式|
|V|激活面向行的可视模式|
|<C-v>|激活面向列块的可视模式|
|gv|重选上次的高亮选区|
|o|切换高亮选区的活动端|

### 选择模式

## 参考文章
1. [Vim命令技巧](https://www.ibm.com/developerworks/cn/linux/l-cn-tip-vim/
)
2. [简明 VIM 练级攻略](http://coolshell.cn/articles/5426.html)
